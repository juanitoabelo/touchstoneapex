{"version":3,"sources":["webpack:///./src/pages/my-company/index.js"],"names":["Input","styled","InputGroup","SelectStyled","Select","isBrowser","window","MyCompany","state","CompanyName","CompanyId","CompanyType","CompanyTypeDescription","CompanyTypeData","saveState","data","setState","onSaveCompany","localStorage","getItem","console","log","getUser","companyid","axios","method","url","params","tblName","queryType","CompanyID","EditCompanyName","then","response","catch","error","onChangeStatus","e","target","value","onChangeOption","label","componentWillUnmount","this","componentDidMount","isLoggedIn","location","href","get","companyId","companyName","CompanyTypeDesc","render","title","className","breakPoint","xs","htmlFor","fullWidth","size","type","placeholder","id","name","onChange","bind","options","map","CompanyTypeID","status","shape","onClick","Component"],"mappings":"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","file":"component---src-pages-my-company-index-js-05865ef3f01eef5ff22a.js","sourcesContent":["import { Container } from '@material-ui/core';\nimport Select from '@paljs/ui/Select';\nimport { InputGroup } from '@paljs/ui/Input';\nimport { Card, CardBody } from '@paljs/ui/Card';\nimport { Button } from '@paljs/ui/Button';\nimport { navigate } from 'gatsby';\nimport Col from '@paljs/ui/Col';\nimport Row from '@paljs/ui/Row';\nimport React, { Component } from 'react';\nimport styled from 'styled-components';\nimport SEO from '../../components/SEO';\nimport axios from 'axios';\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\n\nimport { isLoggedIn, getUser } from \"../../components/services/auth\"\n\n\nconst Input = styled(InputGroup)`\n  margin-bottom: 10px;\n`;\n\nconst SelectStyled = styled(Select)`\n  margin-bottom: 1rem;\n`;\n\nconst isBrowser = typeof window !== \"undefined\"\n  \n\n// export default function MyCompany() {\nexport default class MyCompany extends Component {\n  state = {\n    CompanyName: '',\n    CompanyId: '',\n    CompanyType: 0,\n    CompanyTypeDescription: '',\n    CompanyTypeData: []\n  }\n  componentWillUnmount(){\n    this.setState({\n      CompanyName: '',\n      CompanyId: '',\n      CompanyType: 0,\n      CompanyTypeDescription: '',\n      CompanyTypeData: []\n    })  \n  }\n  componentDidMount() {\n    if (!isLoggedIn() && isBrowser ) {\n      window.location.href=\"/\"\n    }  \n    const { saveState, state } = this;\n    /** get Account Company Details **/\n    axios.get('https://touchstone-api.abelocreative.com/touchstone-ajax/ajax.php', {\n      params: {\n        tblName: 'tblCompany',\n        queryType: 'getSingleCompanyInfo',\n        companyId: getUser().companyid\n      }\n    })\n    .then(function (response) {\n      // console.log('Handled username: data: '+formData.user);\n      //  console.log('Data: '+ JSON.stringify(response.data));\n      console.log('Comapany Name: '+ response.data.companyName);\n      console.log('Company Id: '+ response.data.companyId);\n      console.log('Company CompanyType: '+ response.data.CompanyType);\n  \n      saveState({\n        CompanyName: response.data.companyName,\n        CompanyId: response.data.companyId,\n        CompanyType: response.data.CompanyType,\n        CompanyTypeDescription: response.data.CompanyTypeDesc\n      });\n      \n    })\n    .catch(function (error) {\n      console.log(error);\n    })\n    .then(function (response) {\n      // always executed\n      console.log(response,`successfull`);\n    });  \n  \n    /** Get All Company Type Details **/\n    axios.get('https://touchstone-api.abelocreative.com/touchstone-ajax/ajax.php', {\n      params: {\n        tblName: 'tblCompanyType',\n        queryType: 'getAllCompanyType'\n      }\n    })\n    .then(function (response) {\n      // console.log('Company Type Data: '+ JSON.stringify(response.data));\n      saveState({\n        CompanyTypeData: response.data\n      });\n       \n    })\n    .catch(function (error) {\n      console.log(error);\n    })\n    .then(function (response) {\n      // always executed\n      console.log(response,`successfull`);\n    });\n\n  }\n\n\n  saveState = (data) => {\n    this.setState(data);\n  }\n  onSaveCompany = () => {\n\n    if(window.localStorage.getItem(\"gatsbyUser\") && typeof window !== \"undefined\"){\n      console.log('Company data: '+window.localStorage.getItem(\"gatsbyUser\"));\n      console.log('Company Id: '+getUser().companyid);\n    }\n\n    axios({\n      method: 'get',\n      url: 'https://touchstone-api.abelocreative.com/touchstone-ajax/ajax.php',\n      params: {\n        tblName: 'tblCompany',\n        queryType: 'editSingleCompanyInfo',\n        CompanyID: this.state.CompanyId,\n        EditCompanyName: this.state.CompanyName,\n        CompanyType: this.state.CompanyType\n      }\n    })\n    .then(function (response) {\n      console.log(response,`Updating Company Info successfull`);\n    })\n    .catch(function (error) {\n      console.log(error,`error`);\n    });\n\n  }\n  \n  \n  onChangeStatus = (e) => {\n    this.setState({\n      CompanyName: e.target.value\n    });\n    console.log('Change Status: '+e.target.value);\n  }\n\n  onChangeOption = (e) => {\n    this.setState({\n      CompanyTypeDescription: e.label,\n      CompanyType: e.value,\n    });\n    console.log('Select Optin value: '+ e.label);\n  }\n\n  render() {\n    const { state, onChangeOption, onChangeStatus, onSaveCompany } = this;\n    return (\n      <>\n          <SEO title=\"My Company\" />\n          <div className=\"content-wrapper px-4 py-4\">\n            <Card>\n                <CardBody>\n\n                  <Container>\n                      <Row>\n                        <Col breakPoint={{ xs: 12 }}>\n                          <h1 className=\"mb-5\">{state.CompanyName}</h1>\n                        </Col>\n                      </Row>\n\n                      <Row className=\"justify-content-center align-items-center mb-5\">\n                        <Col className=\"col-lg-8\">\n                        \n                        <form>\n                            <Row>\n                              <Col breakPoint={{ xs: 12 }} >\n                              <label htmlFor=\"EditCompanyName\">Company Name</label>\n                                <Input fullWidth size=\"Small\">\n                                  <input type=\"text\" placeholder={state.CompanyName} id=\"EditCompanyName\" value={state.CompanyName} className=\"EditCompanyName\" name=\"EditCompanyName\"  onChange ={onChangeStatus.bind(this)}/>\n                                </Input>\n                              </Col>\n                              <Col breakPoint={{ xs: 12 }}>\n                                <label htmlFor=\"EditCompanyType\">Company Type</label>\n                                <SelectStyled options={state.CompanyTypeData.map(({ CompanyTypeID, CompanyTypeDesc }) => { \n                                  return { value: CompanyTypeID, label: CompanyTypeDesc };\n                                })}  placeholder={state.CompanyTypeDescription} id=\"EditCompanyType\" name=\"EditCompanyType\" value={state.CompanyId} onChange ={onChangeOption.bind(this)}  />\n                                \n                              </Col>\n                              <Col breakPoint={{ xs: 12 }} >\n                                  <Button status=\"Success\" type=\"button\" shape=\"SemiRound\" onClick={onSaveCompany} fullWidth>Save</Button>\n                              </Col>\n                          </Row>\n                                \n                        </form> \n                        </Col>\n                      </Row>\n\n                    </Container>\n\n                </CardBody>\n              </Card>\n            </div>\n        </>\n    );\n  }\n}\n\n"],"sourceRoot":""}